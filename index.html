<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ìë¦¬ ë°°ì • í”„ë¡œê·¸ë¨</title>

<style>
    body {
        font-family: "Segoe UI", sans-serif;
        background: #f4f6f8;
        padding: 20px;
    }

    h2 {
        text-align: center;
    }

    .container {
        max-width: 500px;
        margin: auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    input, textarea, button {
        width: 100%;
        margin: 6px 0;
        padding: 8px;
        box-sizing: border-box;
    }

    button {
        background: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
    }

    button:hover {
        background: #43a047;
    }

    table {
        margin: 20px auto;
        border-collapse: collapse;
    }

    td {
        border: 1px solid #333;
        padding: 12px;
        min-width: 80px;
        text-align: center;
        font-weight: bold;
    }

    .front {
        background-color: #fff3cd; /* ì•ìë¦¬ ìƒ‰ */
    }
</style>
</head>

<body>

<h2>ğŸ² ëœë¤ ìë¦¬ ë°°ì •</h2>

<div class="container">
    í•™ìƒ ìˆ˜
    <input type="number" id="numStudents">

    ìë¦¬ í–‰
    <input type="number" id="rows">

    ìë¦¬ ì—´
    <input type="number" id="cols">

    <h4>ğŸ”’ ê³ ì • ìë¦¬ (ì„ íƒ)</h4>
    <p style="font-size:14px;">í˜•ì‹: í•™ìƒë²ˆí˜¸,í–‰,ì—´<br>ì˜ˆ: 1,1,2</p>
    <textarea id="fixedSeats" rows="4"></textarea>

    <button onclick="assignSeats()">ìë¦¬ ë°°ì •</button>
    <button onclick="assignSeats()">ğŸ” ë‹¤ì‹œ ì„ê¸°</button>
</div>

<div id="result"></div>

<script>
function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

function assignSeats() {
    const numStudents = Number(document.getElementById("numStudents").value);
    const rows = Number(document.getElementById("rows").value);
    const cols = Number(document.getElementById("cols").value);

    if (rows * cols < numStudents) {
        alert("ìë¦¬ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
        return;
    }

    let students = [];
    for (let i = 1; i <= numStudents; i++) {
        students.push("í•™ìƒ" + i);
    }

    let seats = Array.from({ length: rows }, () =>
        Array.from({ length: cols }, () => "ë¹ˆìë¦¬")
    );

    const fixedInput = document.getElementById("fixedSeats").value.trim();
    if (fixedInput !== "") {
        fixedInput.split("\n").forEach(line => {
            const [num, r, c] = line.split(",").map(x => x.trim());
            const name = "í•™ìƒ" + num;
            seats[r - 1][c - 1] = name;
            students = students.filter(s => s !== name);
        });
    }

    shuffle(students);

    let idx = 0;
    for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
            if (seats[r][c] === "ë¹ˆìë¦¬" && idx < students.length) {
                seats[r][c] = students[idx++];
            }
        }
    }

    let html = "<table>";
    seats.forEach((row, r) => {
        html += "<tr>";
        row.forEach(seat => {
            const cls = r === 0 ? "front" : "";
            html += `<td class="${cls}">${seat}</td>`;
        });
        html += "</tr>";
    });
    html += "</table>";

    document.getElementById("result").innerHTML = html;
}
</script>

</body>
</html>
